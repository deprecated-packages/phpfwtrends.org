{% extends "base.twig" %}

{% block content %}
    {# local macros must be imported, then use like "{{ macros.<X>() }}" #}
    {% import "_macros/trends_macros.twig" as macros %}

    <div class="container-fluid" id="main_table">
            <div class="text-center mb-5">
                <h2 id="{{ framework_trend.vendor_name|webalize }}">{{ framework_trend.vendor_name }}</h2>
                <p>
                    <a href="{{ path('homepage') }}">Back Home â†‘</a>
                </p>
            </div>

            <table class="table table-bordered table-responsive table-striped mt-4 mt-4 sortable_table" id="{{ framework_trend.vendor_name|webalize }}">
                <thead class="thead-inverse">
                <tr>
                    <th class="text-center w-25 align-middle">Package</th>
                    <th class="text-center w-25 align-middle">Year Trend</th>
                    <th class="text-center w-25 align-middle">Last {{ chunk_size_in_months }} Months</th>
                    <th class="text-center w-25 align-middle">Previous {{ chunk_size_in_months }} Months</th>
                </tr>
                </thead>
                {% for package in framework_trend.packages_data %}
                    {# @var package \TomasVotruba\PhpFwTrends\ValueObject\PackageData #}
                    <tr>
                        <td>
                            <a href="https://packagist.org/packages/{{ package.package_name }}/stats">
                                {{ package.package_short_name }}
                            </a>
                        </td>
                        <td class="text-right text-nowrap" data-order="{{ package.last_year_trend }}">{{ macros.trend(package.last_year_trend) }}</td>
                        <td class="text-right text-nowrap" data-order="{{ package.younger_chunk }}">{{ macros.number(package.younger_chunk) }}</td>
                        <td class="text-right text-nowrap" data-order="{{ package.older_chunk }}">{{ macros.number(package.older_chunk) }}</td>
                    </tr>
                {% endfor %}
            </table>
    </div>

    {# sortable tables #}
    <link href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css" rel="stylesheet"/>
{% endblock %}
